var InstantClick=function(aC,ao){var ae=navigator.userAgent,ab="createTouch" in aC,ad,aB,av,aD={},Z,U=false,ay=false,al=false,af=false,X={},aF=false,ar=false,az=[],ai,aa,ak,ah={fetch:[],receive:[],wait:[],change:[]};function am(a){var b=a.indexOf("#");if(b<0){return a}return a.substr(0,b)}function aA(a){while(a.nodeName!="A"){a=a.parentNode}return a}function T(a){do{if(!a.hasAttribute){break}if(a.hasAttribute("data-instant")){return false}if(a.hasAttribute("data-no-instant")){return true}}while(a=a.parentNode);return false}function Q(a){do{if(!a.hasAttribute){break}if(a.hasAttribute("data-no-instant")){return false}if(a.hasAttribute("data-instant")){return true}}while(a=a.parentNode);return false}function aE(a,c){for(var b=0;b<ah[a].length;b++){ah[a][b](c)}}function aw(a,g,c,d){aC.title=a;aC.documentElement.replaceChild(g,aC.body);if(c){history.pushState(null,null,c);var e=c.indexOf("#"),f=e>-1&&aC.getElementById(c.substr(e+1)),b=0;if(f){while(f.offsetParent){b+=f.offsetTop;f=f.offsetParent}}scrollTo(0,b);ad=am(c)}else{scrollTo(0,d)}au();Y.done();aE("change",false)}function aq(){aF=false;ar=false}function ap(a){at(aA(a.target).href)}function V(a){var b=aA(a.target);b.addEventListener("mouseout",S);if(!ak){at(b.href)}else{aB=b.href;av=setTimeout(at,ak)}}function R(a){var b=aA(a.target);if(aa){b.removeEventListener("mousedown",ap)}else{b.removeEventListener("mouseover",V)}at(b.href)}function ac(a){if(a.which>1||a.metaKey||a.ctrlKey){return}a.preventDefault();aj(aA(a.target).href)}function S(){if(av){clearTimeout(av);av=false;return}if(!aF||ar){return}Z.abort();aq()}function an(){if(Z.readyState<4){return}if(Z.status==0){return}X.ready=+new Date-X.start;aE("receive");if(Z.getResponseHeader("Content-Type").match(/\/(x|ht|xht)ml/)){var h=aC.implementation.createHTMLDocument("");h.documentElement.innerHTML=Z.responseText;ay=h.title;af=h.body;var d=am(U);aD[d]={body:af,title:ay,scrollY:d in aD?aD[d].scrollY:0};var g=h.head.children,a=0,c,b;for(var e=g.length-1;e>=0;e--){c=g[e];if(c.hasAttribute("data-instant-track")){b=c.getAttribute("href")||c.getAttribute("src")||c.innerHTML;for(var f=az.length-1;f>=0;f--){if(az[f]==b){a++}}}}if(a!=az.length){al=true}}else{al=true}if(ar){ar=false;aj(U)}}function au(a){var i=aC.getElementsByTagName("a"),b,f=ao.protocol+"//"+ao.host;for(var e=i.length-1;e>=0;e--){b=i[e];if(b.target||b.hasAttribute("download")||b.href.indexOf(f+"/")!=0||(b.href.indexOf("#")>-1&&am(b.href)==ad)||(ai?!Q(b):T(b))){continue}b.addEventListener("touchstart",R);if(aa){b.addEventListener("mousedown",ap)}else{b.addEventListener("mouseover",V)}b.addEventListener("click",ac)}if(!a){var h=aC.body.getElementsByTagName("script"),c,k,d,g;for(e=0,j=h.length;e<j;e++){c=h[e];if(c.hasAttribute("data-no-instant")){continue}k=aC.createElement("script");if(c.src){k.src=c.src}if(c.innerHTML){k.innerHTML=c.innerHTML}d=c.parentNode;g=c.nextSibling;d.removeChild(c);d.insertBefore(k,g)}}}function at(a){if(!aa&&"display" in X&&+new Date-(X.start+X.display)<100){return}if(av){clearTimeout(av);av=false}if(!a){a=aB}if(aF&&(a==U||ar)){return}aF=true;ar=false;U=a;af=false;al=false;X={start:+new Date};aE("fetch");Z.open("GET",a);Z.send()}function aj(a){if(!("display" in X)){X.display=+new Date-X.start}if(av){if(U&&U!=a){ao.href=a;return}at(a);Y.start(0,true);aE("wait");ar=true;return}if(!aF||ar){ao.href=a;return}if(al){ao.href=U;return}if(!af){Y.start(0,true);aE("wait");ar=true;return}aD[ad].scrollY=pageYOffset;aq();aw(ay,af,U)}var Y=function(){var b,g,a,l,c;function m(){b=aC.createElement("div");b.id="instantclick";g=aC.createElement("div");g.id="instantclick-bar";g.className="instantclick-bar";b.appendChild(g);var n=["Webkit","Moz","O"];a="transform";if(!(a in g.style)){for(var q=0;q<3;q++){if(n[q]+"Transform" in g.style){a=n[q]+"Transform"}}}var o="transition";if(!(o in g.style)){for(var q=0;q<3;q++){if(n[q]+"Transition" in g.style){o="-"+n[q].toLowerCase()+"-"+o}}}var p=aC.createElement("style");p.innerHTML="#instantclick{position:"+(ab?"absolute":"fixed")+";top:0;left:0;width:100%;pointer-events:none;z-index:2147483647;"+o+":opacity .25s .1s}.instantclick-bar{background:#29d;width:100%;margin-left:-100%;height:2px;"+o+":all .25s}";aC.head.appendChild(p);if(ab){i();addEventListener("resize",i);addEventListener("scroll",i)}}function k(o,n){l=o;if(aC.getElementById(b.id)){aC.body.removeChild(b)}b.style.opacity="1";if(aC.getElementById(b.id)){aC.body.removeChild(b)}d();if(n){setTimeout(f,0)}clearTimeout(c);c=setTimeout(h,500)}function f(){l=10;d()}function h(){l+=1+(Math.random()*2);if(l>=98){l=98}else{c=setTimeout(h,500)}d()}function d(){g.style[a]="translate("+l+"%)";if(!aC.getElementById(b.id)){aC.body.appendChild(b)}}function e(){if(aC.getElementById(b.id)){clearTimeout(c);l=100;d();b.style.opacity="0";return}k(l==100?0:l);setTimeout(e,0)}function i(){b.style.left=pageXOffset+"px";b.style.width=innerWidth+"px";b.style.top=pageYOffset+"px";var n="orientation" in window&&Math.abs(orientation)==90,o=innerWidth/screen[n?"height":"width"]*2;b.style[a]="scaleY("+o+")"}return{init:m,start:k,done:e}}();var ax="pushState" in history&&(!ae.match("Android")||ae.match("Chrome/"))&&ao.protocol!="file:";function W(){if(ad){return}if(!ax){aE("change",true);return}for(var c=arguments.length-1;c>=0;c--){var e=arguments[c];if(e===true){ai=true}else{if(e=="mousedown"){aa=true}else{if(typeof e=="number"){ak=e}}}}ad=am(ao.href);aD[ad]={body:aC.body,title:aC.title,scrollY:pageYOffset};var d=aC.head.children,b,a;for(var c=d.length-1;c>=0;c--){b=d[c];if(b.hasAttribute("data-instant-track")){a=b.getAttribute("href")||b.getAttribute("src")||b.innerHTML;az.push(a)}}Z=new XMLHttpRequest();Z.addEventListener("readystatechange",an);au(true);Y.init();aE("change",true);addEventListener("popstate",function(){var f=am(ao.href);if(f==ad){return}if(!(f in aD)){ao.href=ao.href;return}aD[ad].scrollY=pageYOffset;ad=f;aw(aD[f].title,aD[f].body,false,aD[f].scrollY)})}function ag(b,a){ah[b].push(a)}return{supported:ax,init:W,on:ag}}(document,location);